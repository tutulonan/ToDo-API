# ToDo API с парсингом Hacker News

## Описание проекта

Backend-сервис на FastAPI, реализующий REST API для управления задачами (TODO-list), WebSocket-уведомления в реальном времени и фоновую задачу, которая автоматически подгружает топ-новости с Hacker News и добавляет их как задачи.

Фронтенд представлен простой HTML-страницей (`index.html`) для тестирования и демонстрации работы API и WebSocket.


### REST API
- `GET /tasks` — получить список задач с фильтрацией (по статусу, категории, источнику)
- `GET /tasks/{id}` — получить задачу по ID
- `POST /tasks` — создать новую задачу вручную
- `PATCH /tasks/{id}` — частично обновить задачу (можно менять заголовок, описание, статус, категорию, приоритет)
- `DELETE /tasks/{id}` — удалить задачу
- `POST /task-generator/run` — принудительно запустить фоновую задачу
- `GET /background-task/status` — получить статус фоновой задачи
- `GET /hacker-news/stats` — статистика по задачам, добавленным из Hacker News
- `GET /health` — проверка работоспособности сервиса

### WebSocket
- Эндпоинт `/ws/tasks`  
  Поддерживает подключение клиентов и отправляет уведомления при:
  - создании задачи (`task_created`)
  - обновлении (`task_updated`)
  - удалении (`task_deleted`)
  - завершении фоновой задачи (`background_task_completed`)
  - подключении клиента (`welcome`)

### Фоновая задача
Запускается каждые 10 минут (по умолчанию — 600 секунд) и:
1. Забирает первые 10 топ-новостей с Hacker News через их public API
2. Формирует из них задачи с приоритетом, зависящим от рейтинга (score)
3. Добавляет только новые (по уникальному заголовку)
4. Отправляет уведомление по WebSocket при добавлении

Также можно запустить эту задачу принудительно через `POST /task-generator/run`.

## Технологии и особенности
- **FastAPI** — для создания REST API
- **WebSocket** — с использованием встроенной поддержки в FastAPI
- **SQLAlchemy 2.0+ (асинхронный)** — ORM и работа с БД
- **SQLite** (`aiosqlite`) — лёгкая локальная БД, не требует настройки
- **httpx** — асинхронный HTTP-клиент для запросов к Hacker News API
- **Pydantic v2** — валидация входных и выходных данных
- **BackgroundTasks + asyncio.Task** — фоновая периодическая задача и однократный запуск по запросу
- **CORS middleware** — для удобства тестирования с фронтенда
- **Lifespan** — корректный запуск и остановка фоновой задачи при старте/остановке приложения

## Установите зависимости:
   ```bash
   pip install fastapi uvicorn sqlalchemy[asyncio] httpx pydantic
